"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[139],{5139(e,t,s){s.r(t),s.d(t,{default:()=>m});var n=s(5043),c=s(9456),i=s(6760),r=s(5560),o=s(1772),l=s(5789),d=s(5089),a=s(8271),h=s(3768),j=s(7070),x=s(9722),p=(s(8067),s(579));const m=()=>{const[e,t]=(0,n.useState)([]),[s,m]=(0,n.useState)(1),u=(0,c.wA)(),{loading:f}=(0,c.d4)(e=>e.root),{userId:g}=(0,j.A)(localStorage.getItem("token")),A=async()=>{try{u((0,d.r1)(!0));const e=await(0,l.A)("/appointment/getallappointments?search=".concat(g));t(e),u((0,d.r1)(!1))}catch(e){console.error("Error fetching appointments:",e),h.oR.error("Failed to fetch appointments. Please try again.")}};(0,n.useEffect)(()=>{A()},[]);const b=Math.ceil(e.length/5),k=e.slice(5*(s-1),5*s);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{}),f?(0,p.jsx)(a.A,{}):(0,p.jsxs)("section",{className:"container notif-section",children:[(0,p.jsx)("h2",{className:"page-heading",children:"Your Appointments"}),e.length>0?(0,p.jsxs)("div",{className:"appointments",children:[(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"S.No"}),(0,p.jsx)("th",{children:"Doctor"}),(0,p.jsx)("th",{children:"P Name"}),(0,p.jsx)("th",{children:"P Age"}),(0,p.jsx)("th",{children:"P Gender"}),(0,p.jsx)("th",{children:"P Mobile No."}),(0,p.jsx)("th",{children:"P bloodGroup"}),(0,p.jsx)("th",{children:"P Family Diseases"}),(0,p.jsx)("th",{children:"Appointment Date"}),(0,p.jsx)("th",{children:"Status"}),(0,p.jsx)("th",{children:"Actions"})]})}),(0,p.jsx)("tbody",{children:k.map((e,t)=>(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:5*(s-1)+t+1}),(0,p.jsx)("td",{children:"".concat(e.doctorId.firstname," ").concat(e.doctorId.lastname)}),(0,p.jsx)("td",{children:"".concat(e.userId.firstname," ").concat(e.userId.lastname)}),(0,p.jsx)("td",{children:e.age}),(0,p.jsx)("td",{children:e.gender}),(0,p.jsx)("td",{children:e.number}),(0,p.jsx)("td",{children:e.bloodGroup}),(0,p.jsx)("td",{children:e.familyDiseases}),(0,p.jsx)("td",{children:e.date}),(0,p.jsx)("td",{children:e.status}),(0,p.jsx)("td",{children:(0,p.jsx)("button",{className:"btn user-btn complete-btn",onClick:()=>(async e=>{try{await x.A.put("/appointment/completed",{appointid:e._id,doctorId:e.doctorId._id,doctorname:"".concat(e.userId.firstname," ").concat(e.userId.lastname)},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),h.oR.success("Appointment completed successfully."),A()}catch(t){console.error("Error completing appointment:",t),h.oR.error("Failed to complete appointment. Please try again.")}})(e),disabled:"Completed"===e.status,children:"Complete"})})]},e._id))})]}),(0,p.jsx)("div",{className:"pagination",children:(()=>{const e=[];for(let t=1;t<=b;t++)e.push((0,p.jsx)("button",{onClick:()=>{m(t)},children:t},t));return e})()})]}):(0,p.jsx)(i.A,{message:"No appointments found."})]}),(0,p.jsx)(r.A,{})]})}},5560(e,t,s){s.d(t,{A:()=>r});s(5043);var n=s(9776),c=s(5475),i=s(579);const r=()=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("footer",{children:[(0,i.jsx)("div",{className:"footer",children:(0,i.jsxs)("div",{className:"footer-links",children:[(0,i.jsx)("h3",{children:"Links"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:(0,i.jsx)(c.k2,{to:"/",children:"Home"})}),(0,i.jsx)("li",{children:(0,i.jsx)(c.k2,{to:"/doctors",children:"Doctors"})}),(0,i.jsx)("li",{children:(0,i.jsx)(c.k2,{to:"/appointments",children:"Appointments"})}),(0,i.jsx)("li",{children:(0,i.jsx)(c.k2,{to:"/notifications",children:"Notifications"})}),(0,i.jsx)("li",{children:(0,i.jsx)(n.Vq,{to:"/#contact",children:"Contact Us"})}),(0,i.jsx)("li",{children:(0,i.jsx)(c.k2,{to:"/profile",children:"Profile"})})]})]})}),(0,i.jsxs)("div",{className:"footer-bottom",children:["Copy Right \xa9 ",(new Date).getFullYear()]})]})})}}]);
//# sourceMappingURL=139.66003a79.chunk.js.map